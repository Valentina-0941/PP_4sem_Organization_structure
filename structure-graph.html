<!DOCTYPE html>
<html lang="ru" data-bs-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Структура организации</title>

    <!--Bootstrap-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
            crossorigin="anonymous"></script>



    <style>
        header {
            width: 55px;
        }

        .icon {
            width: 24px;
        }

        .profil * {
            padding: 0;
        }

        .search-box {
            height: min-content;
            background-color: rgba(0, 0, 0, 0.25);
        }

        .search-box div {
            white-space: nowrap;
        }

    </style>

</head>
<body>
<div class="d-flex">
    <!--Боковая панель навигации-->
    <header>
        <div class="d-flex flex-column flex-shrink-0 bg-body-tertiary" style="height: 100vh;">
            <ul class="nav nav-pills nav-flush flex-column text-center mb-auto">
                <li>
                    <a href="index.html" class="nav-link py-3" data-bs-toggle="tooltip"
                       data-bs-placement="right" aria-label="Dashboard" data-bs-original-title="Главная страница">
                        <img class="icon" src="source/icon/fi-rr-home.svg" alt="home icon">
                    </a>
                </li>
                <li>
                    <a href="#" class="nav-link py-3" id="openModalBtn" data-bs-toggle="tooltip"
                       data-bs-placement="right" aria-label="Dashboard" data-bs-original-title="Поиск">
                        <img class="icon" src="source/icon/fi-rr-search.svg" alt="search icon">
                    </a>
                </li>
                <li>
                    <a href="structure.html" class="nav-link py-3" data-bs-toggle="tooltip"
                       data-bs-placement="right" aria-label="Dashboard" data-bs-original-title="Структура организации">
                        <img class="icon" src="source/icon/fi-rr-stats.svg" alt="stats icon">
                    </a>
                </li>
                <li>
                    <a href="help.html" class="nav-link py-3" data-bs-toggle="tooltip"
                       data-bs-placement="right" aria-label="Dashboard" data-bs-original-title="Помощь">
                        <img class="icon" src="source/icon/fi-rr-question-square.svg" alt="question icon">
                    </a>
                </li>
            </ul>
            <div class="dropdown border-top">
                <a href="#"
                   class="d-flex align-items-center justify-content-center py-3 link-body-emphasis text-decoration-none dropdown-toggle"
                   data-bs-toggle="dropdown" aria-expanded="false">
                    <img src="" alt="" width="24" height="24" class="rounded-circle">
                </a>
                <ul class="dropdown-menu text-small shadow">
                    <li><a class="dropdown-item" href="account.html">Профиль</a></li>
                    <li><a class="dropdown-item" href="settings.html">Настройки</a></li>
                    <li>
                        <hr class="dropdown-divider">
                    </li>
                    <li><a class="dropdown-item" href="#">Sign out</a></li>
                </ul>
            </div>
        </div>

        <!--Боковая панель навигации | Скрипт-->
        <script>
            var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
            var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
                return new bootstrap.Tooltip(tooltipTriggerEl);
            });
        </script>
    </header>
    <div id="container"></div>
    <script src="js/d3.v7.js"></script>
    <script>
        fetch('data.json')
            .then(response => response.json())
            .then(data => {
                const links = data.links;
                const nodes = data.nodes;

                const svg = d3.select("svg");
                const width = +svg.attr("width");
                const height = +svg.attr("height");

                const simulation = d3.forceSimulation(nodes)
                    .force("link", d3.forceLink(links).id(d => d.id))
                    .force("charge", d3.forceManyBody())
                    .force("center", d3.forceCenter(width / 2, height / 2));

                const link = svg.append("g")
                    .attr("stroke", "#999")
                    .attr("stroke-opacity", 0.6)
                    .selectAll("line")
                    .data(links)
                    .join("line")
                    .attr("stroke-width", d => Math.sqrt(d.value));

                const node = svg.append("g")
                    .attr("stroke", "#fff")
                    .attr("stroke-width", 1.5)
                    .selectAll("circle")
                    .data(nodes)
                    .join("circle")
                    .attr("r", 5)
                    .attr("fill", "steelblue");

                node.append("title")
                    .text(d => d.id);

                simulation.on("tick", () => {
                    link
                        .attr("x1", d => d.source.x)
                        .attr("y1", d => d.source.y)
                        .attr("x2", d => d.target.x)
                        .attr("y2", d => d.target.y);

                    node
                        .attr("cx", d => d.x)
                        .attr("cy", d => d.y);
                });
            })
            .catch(error => {
                console.error('Ошибка при загрузке данных:', error);
            });
    </script>
</div>
<div class="btn btn-light position-fixed bottom-0 end-0 m-3 p-2">
    <a href="structure.html">
        <img class="icon" src="source/icon/fi-rr-chart-tree-map.svg">
    </a>
</div>
</body>
</html>